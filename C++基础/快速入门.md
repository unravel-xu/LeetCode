# 语法基础
## 变量的定义
变量必须先定义，才可以使用。不能重名。
变量定义的方式：
```c++
#include <iostream>

using namespace std;

int main()
{
    int a = 5;
    int b, c = a, d = 10 / 2;

    return 0;
}
```
常见变量类型及范围：

| 类型   | 关键字    |
| :--- | :----- |
| 布尔型  | bool   |
| 字符型  | char   |
| 整型   | int    |
| 浮点型  | float  |
| 双浮点型 | double |
## 输入输出
整数的输入输出
```c++
#include <iostream>

using namespace std;

int main(){
	int a, b;
	cin >> a >> b;
	cout << a + b << endl;
	return 0;
}
```
字符串输入输出
```c++
#include <iostream>
#include <string>

using namespace std;

int main(){
	string str;
	cin >> str;
	cout << str;
	return 0;
}
```
输入输出多个不同类型的变量
```c++
#include <iostream>
#include <string>

using namespace std;

int main(){
	int a, b;
	string str;

	cin >> a;
	cin >> b >> str;

	cout << str << "???" << a + b << endl;

	return 0;
}
```

# printf 语句
注意：使用printf时最好添加头文件 `#include <cstdio>`
```c++
#include <iostream>
#include <cstdio>

using namespace std;

int main(){
	printf("Hello World!");
	return 0;
}
```
不同类型的输出格式
1. `int` : %d
2. `float` : %f    默认保留 6 位小数，%.3f 保留 3 位小数
3. `double` : %lf    默认保留 6 位小数
4. `char` : %c

%8.3f 表示这个浮点数的最小宽度为 8，保留 3 位小数，当宽度不足时在前面补空格。
%-8.3f 表示最小宽度为 8，保留 3 位小数，当宽度不足时在后面补上空格。
%08.3f 表示最小宽度为 8，保留 3 位小数，当宽度不足时在前面补上 0。
# 数组
```c++
int a[10] = {0, 1, 2};
int b[] = {0, 1, 1};
float f[3] = {1, 2};//等价于f[] = {1.0, 2.0, 0.0}
char c[3] = {"a", "b", "c"};
int a[3][4]; // 大小为3的数组，每个元素是含有4个整数的数组。
int arr[10][20][30] = {0}; // 将所有元素初始化为0
// 大小为10的数组，它的每个元素是含有20个数组的数组
// 这些数组的元素是含有30个整数的数组
int b[3][4] = {         // 三个元素，每个元素都是大小为4的数组
    {0, 1, 2, 3},       // 第1行的初始值
    {4, 5, 6, 7},       // 第2行的初始值
    {8, 9, 10, 11}      // 第3行的初始值
};
bool st[5][5] = {false};
```
# 字符串
每个常用字符都对应一个-128 ~ 127 的数字，二者之间可以相互转化。注意：目前负数没有与之对应的字符。
```c++
#include <iostream>

using namespace std;

int main(){
	char c = 'a';
	cout << (int)c << endl;

	int a = 66;
	cout << (char)a << endl;

	return 0;
}
```
常用 ASCII 值：'A'- 'Z'是 65 ~ 90，'a' - 'z'是 97 - 122，'0' - '9' 是 48 - 57。字符可以参与运算，运算时会将其当做整数：
```c++
#include <iostream>

using namespace std;

int main(){
	int a = 'B' - 'A';
	int b = 'A' * 'B';
	char c = 'A' + 2;

	cout << a << endl;
	cout << b << endl;
	cout << c << endl;

	return 0;
}
```
字符串就是字符数组加上结束符'\0'，可以使用字符串来初始化字符数组，但此时要注意，每个字符串结尾会暗含一个'\0'字符，因此字符数组的长度至少要比字符串的长度多 1
```c++
#include <iostream>

using namespace std;

int main()
{
    char a1[] = {'C', '+', '+'};            // 列表初始化，没有空字符
    char a2[] = {'C', '+', '+', '\0'};      // 列表初始化，含有显示的空字符
    char a3[] = "C++";                      // 自动添加表示字符串结尾的空字符
    char a4[6] = "Daniel";                  // 错误：没有空间可以存放空字符
	char str[100];
    
    cin >> str;             // 输入字符串时，遇到空格或者回车就会停止
    // 读入字符串，包含空格
    fgets(str, 100, stdin);  // gets函数在新版C++中被移除了，因为不安全。
    // 可以用fgets代替，但注意fgets不会删除行末的回车字符
	cout << str << endl;    // 输出字符串时，遇到空格或者回车不会停止，遇到'\0'时停止
	printf("%s\n", str);
	 
    return 0;
}
```
下面几个函数需要引入头文件:
`#include <string.h>`
1. `strlen(str)`，求字符串的长度
2. `strcmp(a, b)`，比较两个字符串的大小，a < b返回-1，a == b返回0，a > b 返回 1。这里的比较方式是字典序！
3. `strcpy(a, b)`，将字符串 b 复制给从 a 开始的字符数组。
## 可变长字符序列
可变长的字符序列，比字符数组更加好用。需要引入头文件：`#include <string>`
```c++
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string s1;              // 默认初始化，s1是一个空字符串
    string s2 = s1;         // s2是s1的副本，注意s2只是与s1的值相同，并不指向同一段地址
    string s3 = "hiya";     // s3是该字符串字面值的副本
    string s4(10, 'c');     // s4的内容是 "cccccccccc"

    return 0;
}
```
## `string` 读写
```c++
#include <iostream>
#include <string>
#include <cstdio>
using namespace std;

int main()
{
    string s1, s2;

    cin >> s1 >> s2;
    cout << s1 << s2 << endl;
	printf("%s", s1.c_str());
    return 0;
}
```
注意：不能用`printf`直接输出`string`，需要写成：`printf(“%s”, s.c_str());`
使用 `getline` 读取一整行
```c++
#include <iostream>
#include <string>

using namespace std;

int main(){
	string s;

	getline(cin, s);

	cout << s << endl;

	return 0;
}
```

`string` 的 `empty` 和 `size` 操作（注意 `size` 是无符号整数，因此 `s.size() <= -1` 一定成立，可以使用 `(int)s.size()` 转为有符号数进行比较）
```c++
#include <iostream>
#include <string>

using namespace std;

int main(){
	string s1, s2 = "abc";

	cout << s1.empty() << endl;
	cout << s2.empty() << endl;
	cout << s2.size() << endl;
	return 0;
}
// 输出为1，0，3
```
## `string` 赋值
`string` 的比较：支持 >, <, >=, <=, \==, !=等所有比较操作，按字典序进行比较。
为 `string` 对象赋值：
```c++
string s1(10, 'c'), s2;     // s1的内容是 cccccccccc；s2是一个空字符串
s1 = s2;                    // 赋值：用s2的副本替换s1的副本
                            // 此时s1和s2都是空字符串
```
两个 `string` 对象相加：
```C++
string s1 = "hello, ", s2 = "world\n";
string s3 = s1 + s2;                    // s3的内容是 hello, world\n
s1 += s2;                               // s1 = s1 + s2
```
字面值和 `string` 对象相加
做加法运算时，字面值和字符都会被转化成 string 对象，因此直接相加就是将这些字面值串联起来：
```c++
string s1 = "hello", s2 = "world";      // 在s1和s2中都没有标点符号
string s3 = s1 + ", " + s2 + '\n';
```
当把 `string` 对象和字符字面值及字符串字面值混在一条语句中使用时，必须确保每个加法运算符的两侧的运算对象至少有一个是 `string`：
```c++
string s4 = s1 + ", ";  // 正确：把一个string对象和有一个字面值相加
string s5 = "hello" + ", "; // 错误：两个运算对象都不是string

string s6 = s1 + ", " + "world";  // 正确，每个加法运算都有一个运算符是string
string s7 = "hello" + ", " + s2;  // 错误：不能把字面值直接相加，运算是从左到右进行的
```
可以将 `string` 对象当成字符数组来处理：
```c++
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string s = "hello world";

    for (int i = 0; i < s.size(); i ++ )
        cout << s[i] << endl;

    return 0;
}
```
for 语句允许简单的范围迭代（c++11）：
```c++
int my_array[5] = {1, 2, 3, 4, 5}; // 每个数组元素乘2
for (int &x : my_array) {
    x *= 2;
    cout << x << endl; 
} // auto 类型也是 C++11 新标准中的，用来自动获取变量的类型
for (auto &x : my_array) {
    x *= 2;
    cout << x << endl;
}
```
上面for述句的第一部分定义被用来做范围迭代的变量，就像被声明在一般for循环的变量一样，其作用域仅只于循环的范围。而在":"之后的第二区块，代表将被迭代的范围。
或者使用基于范围的 `for` 语句：
```c++
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string s = "hello world";

    for (char c: s) cout << c << endl;

    for (char& c: s) c = 'a';

    cout << s << endl;

    return 0;
}
```
# 函数
## 函数基础
一个典型的函数定义包括以下部分：返回类型、函数名字、由 0 个或多个形参组成的列表以及函数体。
```c++
int fact(int val)
{
    int ret = 1;
    while (val > 1)
        ret *= val -- ;
    return ret;
}
```
函数名字是 `fact`，它作用于一个整型参数，返回一个整型值。`return` 语句负责结束 `fact` 并返回 `ret` 的值。
实参是形参的初始值。第一个实参初始化第一个形参，第二个实参初始化第二个形参，依次类推。形参和实参的类型和个数必须匹配。
```c++
fact("hello");      // 错误：实参类型不正确
fact();             // 错误：实参数量不足
fact(42, 10, 0);    // 错误：实参数量过多
fact(3.14);         // 正确：该实参能转换成int类型，等价于fact(3);
```
形参也可以设置默认值，但所有默认值必须是最后几个。当传入的实参个数少于形参个数时，最后没有被传入值的形参会使用默认值。
函数的形参列表可以为空，但是不能省略。
```c++
void f1() {/* …. */}            // 隐式地定义空形参列表
void f2(void) {/* … */}         // 显式地定义空形参列表
```
形参列表中的形参通常用逗号隔开，其中每个形参都是含有一个声明符的声明。即使两个形参的类型一样，也必须把两个类型都写出来：
```c++
int f3(int v1, v2) {/* … */}        // 错误
int f4(int v1, int v2) {/* … */}    // 正确
```
函数的返回类型不能是数组类型或函数类型，但可以是指向数组或者函数的指针。
局部变量只可以在函数内部使用，全局变量可以在所有函数内使用。当局部变量与全局变量重名时，会优先使用局部变量。
## 参数传递
当初始化一个非引用类型的变量时，初始值被拷贝给变量。此时，对变量的改动不会影响初始值。
```c++
#include <iostream>

using namespace std;

int f(int x)
{
    x = 5;
}

int main()
{
    int x = 10;

    f(x);
    cout << x << endl;

    return 0;
}
```
当函数的形参为引用类型时，对形参的修改会影响实参的值。使用引用的作用：避免拷贝、让函数返回额外信息。
```c++
#include <iostream>

using namespace std;

int f(int &x)
{
    x = 5;
}

int main()
{
    int x = 10;

    f(x);
    cout << x << endl;

    return 0;
}
```
在函数中对数组中的值的修改，会影响函数外面的数组。
一维数组形参的写法：
```c++
// 尽管形式不同，但这三个print函数是等价的
void print(int *a) {/* … */}
void print(int a[]) {/* … */}
void print(int a[10]) {/* … */}
```
```c++
#include <iostream>

using namespace std;

void print(int a[])
{
    for (int i = 0; i < 10; i ++ )
        cout << a[i] << endl;
}

int main()
{
    int a[10];

    for (int i = 0; i < 10; i ++ )
        a[i] = i;

    print(a);

    return 0;
}
```
多维数组形参的写法：
```c++
// 多维数组中，除了第一维之外，其余维度的大小必须指定
void print(int (*a)[10]) {/* … */}
void print(int a[][10]) {/* … */}
```
返回 `void` 的函数不要求非得有 `return` 语句，因为在这类函数的最后一句后面会隐式地执行 `return`。
```c++
void swap(int &v1, int &v2)
{
    // 如果两个值相等，则不需要交换，直接退出
    if (v1 == v2)
        return;
    // 如果程序执行到了这里，说明还需要继续完成某些功能

    int tmp = v2;
    v2 = v1;
    v1 = tmp;
    // 此处无须显示的return语句
}
```
# 类、结构体、指针、引用
## 类
类的定义：
```c++
class Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
};
```
类中的变量和函数被统一称为类的成员变量。`private` 后面的内容是私有成员变量，在类的外部不能访问；`public` 后面的内容是公有成员变量，在类的外部可以访问。
类的使用：
```c++
#include <iostream>

using namespace std;

const int N = 1000010;

class Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int set_age(int a)
        {
            age = a;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
} person_a, person_b, persons[100];

int main()
{
    Person c;

    c.name = "yxc";      // 正确！访问公有变量
    c.age = 18;          // 错误！访问私有变量
    c.set_age(18);       // 正确！set_age()是共有成员变量
    c.add_money(100);

    c.say();
    cout << c.get_age() << endl;

    return 0;
}
```
## 结构体
结构体和类的作用是一样的。不同点在于类默认是 `private`，结构体默认是 `public`。
```c++
struct Person
{
    private:
        int age, height;
        double money;
        string books[100];

    public:
        string name;

        void say()
        {
            cout << "I'm " << name << endl;
        }

        int set_age(int a)
        {
            age = a;
        }

        int get_age()
        {
            return age;
        }

        void add_money(double x)
        {
            money += x;
        }
} person_a, person_b, persons[100];
```